<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RECEBA</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    .recibo {
      border: 1px solid #000;
      padding: 20px;
      width: 500px;
      margin: 0 auto;
    }
    .campo {
      margin-bottom: 10px;
    }
    label {
      font-weight: bold;
    }
    input {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
    }
    #texto-para-pdf {
      width: 180px; /* Largura máxima do texto */
      margin: 20px; /* Margem */
      text-align: justify; /* Justifica o texto */
      font-size: 12px; /* Tamanho da fonte */
    }
  </style>
</head>
<body>

  <h1>RECEBA</h1>
  <div class="recibo">
    <div class="campo">
      <label for="nome">Nome do Recebedor:</label>
      <input type="text" id="nome" placeholder="Digite o nome">
    </div>

    <div class="campo">
        <label for="cpf">CPF:</label>
        <input type="text" id="cpf" placeholder="Digite o cpf">
      </div>

    <div class="campo">
      <label for="valor">Valor:</label>
      <input type="text" id="valor" placeholder="Digite o valor">
    </div>

    <div class="campo">
        <label for="servico">Serviço Prestado:</label>
        <input type="text" id="servico" placeholder="Digite o serviço prestado">
      </div>

    <div class="campo">
      <label for="data">Data:</label>
      <input type="date" id="data">
    </div>

    <button onclick="gerarRecibo()">Gerar PDF</button>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
  <script>
    // Função para justificar o texto
    function addJustifiedText(doc, text, x, y, maxWidth, lineHeight) {
        const words = text.split(' ');
        let line = '';
        let lines = [];

        // Monta as linhas que cabem na largura máxima
        words.forEach(word => {
            const testLine = line + word + ' ';
            const testWidth = doc.getTextWidth(testLine);

            if (testWidth > maxWidth && line !== '') {
                lines.push(line.trim());
                line = word + ' ';
            } else {
                line = testLine;
            }
        });

        lines.push(line.trim()); // Adiciona a última linha

        // Escreve as linhas no PDF
        lines.forEach((lineText, i) => {
            const wordsInLine = lineText.split(' ');
            let spacing = (maxWidth - doc.getTextWidth(lineText)) / (wordsInLine.length - 1);
            let currentX = x;

            // Se for a última linha ou se houver apenas uma palavra na linha, não justifica
            if (i === lines.length - 1 || wordsInLine.length === 1) {
                doc.text(lineText, x, y + i * lineHeight);
            } else {
                wordsInLine.forEach((word, j) => {
                    doc.text(word, currentX, y + i * lineHeight);
                    currentX += doc.getTextWidth(word) + spacing; // Aplica o espaço entre as palavras
                });
            }
        });
    }

    function gerarRecibo() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      const nome = document.getElementById('nome').value;
      const cpf = document.getElementById('cpf').value;
      const valor = document.getElementById('valor').value;
      const servico = document.getElementById('servico').value;
      const data = document.getElementById('data').value;

      const texto = `Eu ${nome}, inscrit@ com o CPF ${cpf}, declaro que recebi o valor de ${valor} da FETAEPE, referente ${servico}.`;
      
      doc.text(`RECIBO`, 20, 10);

      // Justifica o texto na posição desejada
      addJustifiedText(doc, texto, 20, 30, 180, 10);

      // Adiciona a data (não precisa justificar)
      doc.text(`Data: ${data}`, 20, 70);

      // Salva o PDF
      doc.save("recibO.pdf");
    }
  </script>

</body>
</html>
